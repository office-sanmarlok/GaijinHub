# GaijinHub Expo実装の難点リスト

## 1. ルーティングシステムの完全な書き換え
### 現状
- Next.js App Router (`app/[locale]/...`)
- 国際化対応のパス構造
- ミドルウェアによる認証とロケール処理

### 難点
- [ ] Expo RouterはNext.jsのApp Routerと互換性なし
- [ ] `[locale]`ディレクトリ構造の再設計が必要
- [ ] middlewareの概念がExpoには存在しない
- [ ] 保護されたルートの実装方法が異なる

## 2. Supabase認証の移行
### 現状
- `@supabase/ssr`でサーバーサイド認証
- クッキーベースのセッション管理
- ミドルウェアでの認証チェック

### 難点
- [ ] ExpoはAsyncStorageベースの認証
- [ ] SSRクライアントからReact Native用クライアントへの移行
- [ ] セッション管理の仕組みが根本的に異なる
- [ ] 認証フローの再実装が必要

## 3. 国際化（i18n）システムの再構築
### 現状
- `next-intl`による多言語対応
- サーバーサイドでのロケール検出
- URLベースのロケール切り替え

### 難点
- [ ] `next-intl`はExpoで使用不可
- [ ] `react-native-i18n`や`i18next`への移行が必要
- [ ] デバイスのロケール検出方法が異なる
- [ ] URLベースのロケール管理が不可能

## 4. UIコンポーネントの完全な置き換え
### 現状
- Radix UIコンポーネント（Dialog、Select、Popoverなど）
- Tailwind CSSによるスタイリング
- shadcn/uiベースのコンポーネント

### 難点
- [ ] Radix UIはWeb専用でReact Nativeで動作しない
- [ ] Tailwind CSSは使用不可（NativeWindは制限あり）
- [ ] 全UIコンポーネントをReact Native要素で再実装
- [ ] アニメーションの実装方法が異なる

## 5. 地図機能（Leaflet）の移行
### 現状
- `react-leaflet`による地図表示
- WebベースのLeaflet実装

### 難点
- [ ] LeafletはWebView経由でしか使用不可
- [ ] `react-native-maps`への完全な移行が必要
- [ ] マーカーやポップアップの実装が異なる
- [ ] パフォーマンスへの影響

## 6. API通信とデータフェッチング
### 現状
- Next.js API Routes (`app/api/...`)
- サーバーサイドでのデータ処理
- Route Handlersによるエンドポイント

### 難点
- [ ] API Routesの概念が存在しない
- [ ] 全てのAPI呼び出しを外部エンドポイントに移行
- [ ] CORS設定が必要
- [ ] 認証トークンの管理方法が変わる

## 7. ファイルアップロード機能
### 現状
- Web標準のFile APIを使用
- Supabase Storageへの直接アップロード

### 難点
- [ ] `expo-image-picker`への移行が必要
- [ ] ファイル処理のAPIが異なる
- [ ] 画像圧縮・リサイズの実装が必要
- [ ] プログレス表示の実装方法が変わる

## 8. フォーム処理とバリデーション
### 現状
- `react-hook-form`によるフォーム管理
- Zodによるスキーマバリデーション

### 難点
- [ ] Web用のフォーム要素をNative要素に置き換え
- [ ] キーボード処理の追加実装が必要
- [ ] フォーカス管理が複雑化
- [ ] エラー表示UIの再設計

## 9. ナビゲーション構造
### 現状
- URLベースのナビゲーション
- ブラウザの戻る/進む機能
- クエリパラメータによる状態管理

### 難点
- [ ] スタックナビゲーションへの移行
- [ ] タブナビゲーションの実装
- [ ] ディープリンクの設定が複雑
- [ ] 画面遷移アニメーションの追加

## 10. 開発環境とビルドプロセス
### 現状
- Next.js開発サーバー
- Vercelへのデプロイ
- 環境変数の管理

### 難点
- [ ] Expo開発クライアントの設定
- [ ] EAS Buildの設定と学習
- [ ] App Store/Google Playへの申請プロセス
- [ ] OTA更新の設定

## 11. パフォーマンス最適化
### 現状
- Next.jsの自動最適化
- 画像の自動最適化
- コード分割

### 難点
- [ ] バンドルサイズの手動最適化が必要
- [ ] 画像最適化の再実装
- [ ] メモリ管理への配慮が必要
- [ ] リスト表示の最適化（FlatList）

## 12. テーマとダークモード
### 現状
- `next-themes`によるテーマ管理
- CSS変数によるカラー管理

### 難点
- [ ] React Nativeでのテーマ実装
- [ ] システムテーマとの連携
- [ ] カラー値の管理方法が変わる
- [ ] コンポーネントごとのスタイル切り替え

## 13. SEOとメタデータ
### 現状
- Next.jsのメタデータAPI
- 動的なOGP画像生成
- サイトマップ生成

### 難点
- [ ] モバイルアプリではSEO不要だが、Webバージョンとの両立が課題
- [ ] App Storeの最適化（ASO）への対応
- [ ] ディープリンク用のメタデータ設定

## 14. エラーハンドリング
### 現状
- Next.jsのエラーバウンダリ
- カスタムエラーページ

### 難点
- [ ] React Native用のエラーバウンダリ実装
- [ ] クラッシュレポートの設定（Sentry等）
- [ ] ネットワークエラーの処理
- [ ] アプリクラッシュへの対応

## 15. 開発チームのスキルギャップ
### 現状
- Next.js/React/TypeScriptの知識

### 難点
- [ ] React Nativeの学習曲線
- [ ] iOS/Androidプラットフォーム固有の知識
- [ ] ネイティブモジュールの理解
- [ ] アプリストアの申請プロセス

## まとめ
Expo実装では、ほぼ全てのレイヤーで大幅な変更が必要となり、実質的に新規アプリケーションの開発に近い作業量となります。既存のビジネスロジックは再利用可能ですが、UI層とインフラ層は完全な再構築が必要です。